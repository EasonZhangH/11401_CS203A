# LeetCode Daily 2025/11/05 筆記

## 題目：Process Network Queries (LeetCode 3607)

### 題目描述
- 給定網路連接和查詢
- 查詢類型 1：找到指定站點或其連通分量中的在線站點
- 查詢類型 2：將站點設為離線

---

### 觀察
- 使用並查集（DSU）維護連通性
- 用 set 維護每個連通分量的在線站點
- 處理查詢時根據類型執行不同操作

---

### 程式碼 (C++)

```cpp
class Solution {
public:
    class DSU {
    public:
        vector<int> root;
        DSU(int N) { 
            root.resize(N);
            for(int i = 0; i < N; i++)
                root[i] = i;
        }
        int find(int u) { 
            if(u != root[u])
                root[u] = find(root[u]);
            return root[u];    
        }
        void unite(int a, int b) {
            int rootA = find(a);
            int rootB = find(b);
            if(rootA != rootB)
                root[rootB] = rootA;
        }
    };
    
    vector<int> processQueries(int c, vector<vector<int>>& connections, vector<vector<int>>& queries) {
        vector<int> ans;
        DSU dsu(c+1);
        vector<int> power(c+1, 0);
        
        for(auto& conn : connections)
            dsu.unite(conn[0], conn[1]);

        unordered_map<int, set<int>> onlineStations;
        
        for(int i = 1; i <= c; i++) {
            int root = dsu.find(i);
            onlineStations[root].insert(i);
        }
        
        for(auto& q : queries) {
            int cmd = q[0], station = q[1];
            int root = dsu.find(station);
            
            if(cmd == 1) {
                if(power[station] == 0) {ans.push_back(q[1]);}
                else{ 
                    if(onlineStations[root].empty())
                        ans.push_back(-1);
                    else 
                        ans.push_back(*onlineStations[root].begin());
                } 
            } else {
                onlineStations[root].erase(station);
                power[station] = 1;
            }
        }
        
        return ans;
    }
};
```
