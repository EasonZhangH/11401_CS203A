### **雜湊基礎定義與底層結構**
*   **雜湊 (Hashing) 定義**：一種使用雜湊函數計算陣列桶（Bucket）索引，藉此儲存鍵值對（Key-Value Pairs）的資料結構。它能實現平均常數時間的插入、刪除與查找。
*   **字典 (Dictionary)**：
    *   定義：一組鍵值對的集合，每個鍵對應一個項目。
    *   特性：通常沒有兩個對擁有相同的鍵。
    *   索引概念：**陣列 (Array)** 是本質上以索引為基礎的資料結構。
*   **底層結構 (Underlying Structure)**：雜湊表通常是**混合結構**，使用**陣列**作為桶子空間，並搭配**鏈結串列**（或其他結構）來處理衝突。
*   **DNS 快取應用**：雜湊在現實中的應用範例，透過將網域名稱映射至 IP 位址，大幅提升搜尋效率。

---

### **雜湊函數設計與方法**
雜湊函數應具備**確定性**（相同鍵得相同索引）、**均勻分佈**以及**高效計算**的特性。

| 類別 | 方法 | 說明與範例 |
| :--- | :--- | :--- |
| **整數鍵** | **除法法 (Division)** | $h(k) = k \mod m$。建議 $m$ 選用質數以減少模式重複。 |
| **整數鍵** | **乘法法 (Multiplication)** | $h(k) = \text{floor}(m \cdot (k \cdot A \mod 1))$，其中 $0 < A < 1$。 |
| **整數鍵** | **摺疊法 (Folding)** | 將鍵分割後相加。例：$123456 \to 12+34+56=102$。 |
| **字串鍵** | **簡單總和** | 將每個字元的 ASCII 碼相加後取模（如："CAT" $\to 67+65+84$）。 |
| **字串鍵** | **加權/多項式滾動** | $h(s) = (\Sigma s[i] \cdot p^i) \mod m$，提供更好的分佈效果。 |

---

### **靜態雜湊與動態雜湊比較**

| 比較面向 | 靜態雜湊 (Static Hashing) | 動態雜湊 (Dynamic Hashing) |
| :--- | :--- | :--- |
| **表格大小** | 固定不變 | 可隨記錄增加而動態增長或縮小 |
| **雜湊函數** | 保持常數 | 會隨表格大小自適應變化 |
| **負載因子增加時** | 效能會下降 | 仍能保持高效 |
| **重新雜湊 (Rehashing)** | 必須重建整個表格 | 僅需進行局部桶分裂 |
| **最佳用途** | 小型、資料量固定的集合 | 大型或持續增長的資料集 |

---

### **衝突解決策略 (Collision Handling)**
當兩個不同的鍵映射到同一個索引時即發生衝突。

#### **1. 鏈結法 (Chaining / Separate Lists)**
*   在每個索引位置維護一個鏈結串列，儲存所有映射至該位置的鍵值對。
*   優點是簡單且靈活，適合無法預測資料量的場景。

#### **2. 開放定址法 (Open Addressing / Probing)**
如果計算出的位置已被佔用，則依特定規則尋找下一個空位。

| 探測方法 | 公式 / 行為 | 優缺點特性 |
| :--- | :--- | :--- |
| **線性探測 (Linear)** | $(h(k) + i) \mod m$ | 簡單，但會造成**主要群聚**（連續佔用區塊擴大）。 |
| **二次探測 (Quadratic)** | $(h(k) + c_1 i + c_2 i^2) \mod m$ | 間隔二次方增長，減少群聚，但可能產生**次要群聚**。 |
| **雙重雜湊 (Double)** | $(h_1(k) + i \cdot h_2(k)) \mod m$ | 使用第二個雜湊值作為步長，分佈最均勻。 |

---

### **效能與時間複雜度**
雜湊表的效能深受**負載因子 ($\alpha = \text{元素數量} / \text{表格大小}$)** 的影響。

| 雜湊方式 | 操作 | 平均情況 (Average) | 最差情況 (Worst) | 備註 |
| :--- | :--- | :--- | :--- | :--- |
| **鏈結法** | 搜尋 / 插入 / 刪除 | $O(1 + \alpha)$ | $O(n)$ | $\alpha$ 小時趨近 $O(1)$ |
| **開放定址法** | 搜尋 / 插入 / 刪除 | $O(1)$ | $O(n)$ | 假設 $\alpha \le 0.7$；刪除需延遲標記 |

---

### **抽象資料類型 (ADT) 管理重點**
*   **ADT Dictionary**：包含基本功能如 `Create`, `IsEmpty`, `Search`, `Delete`, `Insert`。
*   **ADT HashTable (鏈結法實作)**：
    *   **參數**：包含桶數 $m$、負載因子 $\lambda$、以及觸發調整大小的閾值 **MAX_LOAD_FACTOR**（預設 0.75）。
    *   **插入邏輯**：如果鍵已存在則替換值；否則添加至鏈結前端。若 $\lambda > MAX\_LOAD\_FACTOR$，則會觸發 **resize(H, 2*m)** 重新分配空間。
    *   **走訪 (Traverse)**：依序從第一個桶到最後一個桶進行訪問，桶內則按插入順序訪問。

**💡 核心觀念總結**：雜湊表的高效率來自於其能「**早期排除不必要的候選對象**」。好的雜湊系統需要：一個**均勻的雜湊函數**、適當的**表格大小（質數）**以及有效的**衝突處理技術**，並在表格過滿時適時地**自動調整大小**。
